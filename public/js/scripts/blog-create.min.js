define(["require","exports","jquery","simplemde","marked","bootstrap_select","bootstrap_validator"],function(e,t,n,a,i){"use strict";var r=function(){function e(e){var t=this;t.simplemde=new a({element:document.getElementById(e),previewRender:function(e){return i(e)},promptURLs:!0,autosave:{enable:!0,uniqueid:"simplemde_id",delay:1e4}}),n(document).ready(function(){n("select").selectpicker(),n("form").validator().on("submit",function(e){var n=!e.isDefaultPrevented();n&&(e.preventDefault(),t.save())})})}return e.prototype.save=function(){var e={imageUrl:n('[name="image"]').val(),title:n('[name="title"]').val(),preview:n('[name="preview"]').val(),content:this.getText(),tags:n("#tag-select").selectpicker("val"),type:n("#blog-type").selectpicker("val"),isActive:"1"===n("#blog-active").selectpicker("val")},t=n("#blog-new-tags").val().split(", ");t.length&&t[0]&&(e.new_tags=t),n.ajax({url:"/blogs/create",method:"POST",data:JSON.stringify(e),contentType:"application/json"}).then(function(){window.location.replace("/blogs")})},e.prototype.getText=function(){return this.simplemde.value()},e}();return r});